---
layout: post
title: How to make technical decision
---

### 3. 警惕“沉没成本谬误”

关于“沉没成本谬误”的概念在《薛兆丰经济学课》中有一个非常通俗点的解释：

> 我们在看电影的时候，坐在电影院里面15~20分钟，就知道这部电影好不好看。但是电影票已经买了，钱已经付了，如果这部电影不好看的话，你最合适的做法是及时止损，当场离开，已经损失了买电影票的钱，不要再继续损失自己宝贵的时间。但是电影院里面要播一部烂片，有多少人会在电影播到10分钟20分钟的时候，就当机立断地站起来离开呢？

在看到这个概念时立刻想到了一个项目中和技术选型相关的例子：

在三年前我们做了一次错误的技术选型，引入了一个非常不成熟的数据库，在没有充分隔离的情况下在架构中大规模使用，之后接连遇到了数据文件损坏、事务写入超时、集群突然宕机等诡异的问题。之后这种问题便持续不断。

团队围绕该数据库构建了服务健康状况监控工具、数据修复工具、提高易用性的客户端库等，在架构中也引入消息机制避免数据丢失。同时团队也持续进行了很多知识积累，内部还有专门的兴趣小组，从中产生了几位熟悉该数据库的专家，甚至有的人还为它贡献了源码。客户也不断升级了数据库服务器硬件并购买了商用的授权，之后虽然大问题不多，但是小问题仍然源源不断，那些无法解释的诡异问题仍然存在。

当三年后当我们再次重新回顾这个技术决策时发现其所代表的架构风格并不适合我们项目，一开始宏伟的设想并不现实，它带来的问题比解决的问题更多。那更合适的选择是什么？要推到重来吗？想到我们在过去三年数不清的问题讨论和技术改进，一次次的产品环境支持和数据库升级，是否会有一丝犹豫？

假如我们当时没有做这个选择，那这些时间和精力应该花在什么地方才能凸显其高于现在的价值？

在技术债治理的过程中，实践可以剪裁，甚至原则也可以妥协，但我们需要保持的是这样的思考：技术改进对于个人、团队、公司和客户的价值是什么？
